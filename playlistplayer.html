<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>YouTube Playlist Player</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    };
  </script>
  <!-- DaisyUI -->
  <script src="https://cdn.jsdelivr.net/npm/daisyui"></script>
</head>
<body class="min-h-screen bg-base-200 text-base-content">
  <div class="container mx-auto p-4 max-w-xl">
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-2xl font-bold">ğŸµ YouTube Playlist Player</h1>
      <label class="swap swap-rotate">
        <input type="checkbox" id="themeToggle" />
        <svg class="swap-on fill-current w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.64 17.66A9 9 0 1118.36 6.34 9 9 0 015.64 17.66z"/></svg>
        <svg class="swap-off fill-current w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.36 6.36l-1.41-1.41M6.05 6.05l-1.41-1.41M18.36 6.36l-1.41 1.41M6.05 17.95l-1.41-1.41"/></svg>
      </label>
    </div>

    <div class="form-control mb-4">
      <label class="label">
        <span class="label-text">Enter YouTube Playlist URL</span>
      </label>
      <input type="text" id="playlistUrl" placeholder="https://www.youtube.com/playlist?list=..." class="input input-bordered w-full" />
    </div>

    <button onclick="loadPlaylist()" class="btn btn-primary w-full mb-4">Load Playlist</button>

    <div id="playerContainer" class="aspect-video hidden">
      <div id="player" class="w-full h-full"></div>
    </div>

    <p id="errorMessage" class="text-red-500 mt-2 hidden">âŒ Invalid Playlist URL</p>
  </div>

  <!-- YouTube IFrame API -->
  <script>
    let player;

    function extractPlaylistId(url) {
      const match = url.match(/[?&]list=([a-zA-Z0-9_-]+)/);
      return match ? match[1] : null;
    }

    function loadPlaylist() {
      const url = document.getElementById("playlistUrl").value.trim();
      const playlistId = extractPlaylistId(url);

      if (!playlistId) {
        document.getElementById("errorMessage").classList.remove("hidden");
        return;
      }

      document.getElementById("errorMessage").classList.add("hidden");
      document.getElementById("playerContainer").classList.remove("hidden");

      if (player) {
        player.loadPlaylist({ list: playlistId });
      } else {
        player = new YT.Player("player", {
          height: "360",
          width: "640",
          playerVars: {
            listType: "playlist",
            list: playlistId,
            autoplay: 1
          },
          events: {
            onReady: (e) => e.target.playVideo()
          }
        });
      }
    }

    // Load YouTube IFrame API
    const tag = document.createElement("script");
    tag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(tag);

    // Theme toggle
    const toggle = document.getElementById("themeToggle");
    toggle.addEventListener("change", () => {
      document.documentElement.setAttribute(
        "data-theme",
        toggle.checked ? "dark" : "light"
      );
    });
  </script>
</body>
</html>
